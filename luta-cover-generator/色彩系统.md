# Luta 封面生成器 - 色彩系统（V2 饱和度+45%版）

## 处理口径
HSV 模型下饱和度 S × 1.45（上限 100%），亮度 V 保持不变。

---

## 一、五方佛五色体系

基于传统五方佛色彩象征，每色提供 6 个变体（从极浅到中等）。

### 蓝（东方）
**含义**：澄明、冷静、深邃

| 名称 | 原色号 | 新色号 | 饱和度变化 |
|------|--------|--------|------------|
| ice-blue | `#E8F4FC` | `#DFF0FC` | 7.9%→11.5% |
| sky-mist | `#D6EAF8` | `#C7E4F8` | 13.7%→19.9% |
| soft-azure | `#AED6F1` | `#90CAF1` | 28.0%→40.0% |
| powder-blue | `#85C1E9` | `#58AFE9` | 42.9%→62.2% |
| clear-cyan | `#E0F7FA` | `#D4F6FA` | 10.4%→15.1% |
| serene-blue | `#B3E5FC` | `#92DBFC` | 29.0%→42.0% |

### 黄（南方）
**含义**：温暖、开阔、滋养

| 名称 | 原色号 | 新色号 | 饱和度变化 |
|------|--------|--------|------------|
| cream-yellow | `#FFF9E6` | `#FFF6DB` | 9.8%→14.2% |
| soft-gold | `#FFF3CD` | `#FFEEB7` | 19.6%→28.4% |
| warm-amber | `#FFE9B3` | `#FFDF91` | 29.8%→43.2% |
| honey-light | `#FFE082` | `#FFD24A` | 49.0%→71.1% |
| butter | `#FFF8E1` | `#FFF5D3` | 11.8%→17.1% |
| sunlight | `#FFECB3` | `#FFE391` | 29.8%→43.2% |

### 红（西方）
**含义**：力量、温热、精进

| 名称 | 原色号 | 新色号 | 饱和度变化 |
|------|--------|--------|------------|
| blush | `#FFEBEE` | `#FFE2E6` | 7.8%→11.4% |
| rose-mist | `#FFCDD2` | `#FFB7BE` | 19.6%→28.4% |
| coral-light | `#FFAB91` | `#FF8560` | 43.1%→62.5% |
| peach | `#FFCCBC` | `#FFB59E` | 26.3%→38.1% |
| warm-rose | `#F8BBD9` | `#F8A0CB` | 24.6%→35.7% |
| terracotta-light | `#FFCCBC` | `#FFB59E` | 26.3%→38.1% |

### 绿（北方）
**含义**：生机、平衡、流动

| 名称 | 原色号 | 新色号 | 饱和度变化 |
|------|--------|--------|------------|
| mint-mist | `#E8F5E9` | `#E2F5E4` | 5.3%→7.7% |
| soft-sage | `#C8E6C9` | `#BAE6BC` | 13.0%→18.9% |
| spring-green | `#A5D6A7` | `#8FD692` | 22.9%→33.2% |
| jade-light | `#B2DFDB` | `#9EDFD9` | 20.2%→29.3% |
| eucalyptus | `#E0F2F1` | `#D8F2F1` | 7.4%→10.8% |
| celadon | `#DCEDC8` | `#D4EDB7` | 15.6%→22.6% |

### 白（中央）
**含义**：清净、澄澈、空灵

| 名称 | 原色号 | 新色号 | 饱和度变化 |
|------|--------|--------|------------|
| pure-white | `#FFFFFF` | `#FFFFFF` | 0.0%→0.0% |
| cloud-white | `#FAFAFA` | `#FAFAFA` | 0.0%→0.0% |
| fog-white | `#F5F5F5` | `#F5F5F5` | 0.0%→0.0% |
| pearl | `#F8F9FA` | `#F7F9FA` | 0.8%→1.2% |
| silk | `#FCFCFC` | `#FCFCFC` | 0.0%→0.0% |
| moon-white | `#F0F4F8` | `#ECF2F8` | 3.2%→4.7% |

---

## 二、背景色系统

高明度中性背景色，区分冷暖倾向：

| 名称 | 原色号 | 新色号 | 温度 | 饱和度变化 |
|------|--------|--------|------|------------|
| paper-white | `#F6F4EE` | `#F6F3EA` | 暖 | 3.3%→4.7% |
| mist-white | `#F3F5F6` | `#F2F5F6` | 冷 | 1.2%→1.8% |
| warm-beige | `#F7F2E8` | `#F7F0E1` | 暖 | 6.1%→8.8% |
| soft-gray | `#F0F0F0` | `#F0F0F0` | 中性 | 0.0%→0.0% |
| cream | `#FFFEF5` | `#FFFEF1` | 暖 | 3.9%→5.7% |
| cool-mist | `#F5F7FA` | `#F3F6FA` | 冷 | 2.0%→2.9% |
| ivory | `#FFFFF0` | `#FFFFE9` | 暖 | 5.9%→8.5% |
| snow | `#FFFAFA` | `#FFF8F8` | 中性 | 2.0%→2.8% |

---

## 三、六度配色规则

每个度有专属的色彩策略：

### 布施（Dana）
- **主色相**：黄、绿
- **对比色**：蓝、红（小面积）
- **背景温度**：暖
- **最低明度**：85%
- **最高饱和度**：35%
- **对比色概率**：70%
- **点醒面积**：2-6%
- **点醒不透明度**：10-15%
- **对比策略**：area, brightness, warm-cool
- **预设调色板**：
  - 主色：butter `#FFF5D3`
  - 辅色1：celadon `#D4EDB7`
  - 辅色2：ice-blue `#DFF0FC`
  - 背景：paper-white `#F6F3EA`

### 持戒（Sila）
- **主色相**：白、蓝、绿
- **对比色**：红、黄（极小面积）
- **背景温度**：冷
- **最低明度**：88%
- **最高饱和度**：25%
- **对比色概率**：35%
- **点醒面积**：1-4%
- **点醒不透明度**：8-12%
- **对比策略**：brightness, area, none
- **预设调色板**：
  - 主色：moon-white `#ECF2F8`
  - 辅色1：ice-blue `#DFF0FC`
  - 辅色2：eucalyptus `#D8F2F1`
  - 背景：mist-white `#F2F5F6`

### 忍辱（Ksanti）
- **主色相**：白、绿
- **对比色**：黄（暖黄作为稳定中轴）
- **背景温度**：暖（中性偏暖）
- **最低明度**：84%
- **最高饱和度**：32%
- **对比色概率**：40%
- **点醒面积**：6-18%（暖黄轴可更大面积）
- **点醒不透明度**：12-18%
- **对比策略**：layering, brightness, warm-cool, none
- **预设调色板**：
  - 主色：pearl `#F7F9FA`
  - 辅色1：mint-mist `#E2F5E4`
  - 辅色2：warm-amber `#FFDF91`
  - 背景：cream `#FFFEF1`

### 精进（Virya）
- **主色相**：红、黄
- **对比色**：蓝、绿（冷色平衡）
- **背景温度**：暖
- **最低明度**：85%
- **最高饱和度**：40%
- **对比色概率**：75%
- **点醒面积**：2-6%
- **点醒不透明度**：10-15%
- **对比策略**：brightness, area, warm-cool
- **预设调色板**：
  - 主色：honey-light `#FFD24A`
  - 辅色1：warm-rose `#F8A0CB`
  - 辅色2：serene-blue `#92DBFC`
  - 背景：warm-beige `#F7F0E1`

### 禅定（Samadhi）
- **主色相**：白、蓝
- **对比色**：黄（暖黄作为"内在灯火"，避免红）
- **背景温度**：中性（不强冷）
- **最低明度**：88%
- **最高饱和度**：28%
- **对比色概率**：30%
- **点醒面积**：2-8%
- **点醒不透明度**：10-15%
- **对比策略**：brightness, area, warm-cool, none
- **预设调色板**：
  - 主色：cloud-white `#FAFAFA`
  - 辅色1：clear-cyan `#D4F6FA`
  - 辅色2：sunlight `#FFE391`
  - 背景：ivory `#FFFFE9`

### 般若（Prajna）
- **主色相**：白、蓝、黄
- **对比色**：绿、红（小面积点醒）
- **背景温度**：冷
- **最低明度**：85%
- **最高饱和度**：32%
- **对比色概率**：55%
- **点醒面积**：2-5%
- **点醒不透明度**：10-15%
- **对比策略**：warm-cool, brightness, area
- **预设调色板**：
  - 主色：moon-white `#ECF2F8`
  - 辅色1：clear-cyan `#D4F6FA`
  - 辅色2：cream-yellow `#FFF6DB`
  - 背景：cool-mist `#F3F6FA`

---

## 四、对比策略说明

| 策略 | 说明 |
|------|------|
| **area** | 面积对比，大面积主色 + 小面积点缀 |
| **brightness** | 明度对比，同色相不同明度层次 |
| **warm-cool** | 冷暖对比，暖主色配冷点缀或反之 |
| **layering** | 层次叠加，透明度渐变 |
| **none** | 无对比，纯净单色方案 |

---

## 五、色彩硬约束

- 有色相颜色 ≤ 3
- 中性背景色 = 1
- 主色必须为高明度版本
- 禁止荧光/霓虹感
- 缩略到 128px 仍需清爽

---

## 六、配色生成算法

```javascript
// 1. 根据度选择主色相
const primaryHue = pickOne(rule.primaryHues);
const primaryVariant = selectColorVariant(primaryHue, rule.brightnessMin, rule.saturationMax);

// 2. 选择对比策略
const contrastMethod = pickOne(rule.allowedContrastMethods);

// 3. 概率决定是否使用对比色
const useAccent = contrastMethod !== 'none' && Math.random() < rule.accentProbability;
const accentHue = useAccent ? pickOne(rule.accentHues) : null;

// 4. 对比色使用强度（各度专属范围）
const accentAreaPct = accentVariant ? randFloat(rule.accentAreaRange[0], rule.accentAreaRange[1]) : 0;
const accentOpacityPct = accentVariant ? randFloat(rule.accentOpacityRange[0], rule.accentOpacityRange[1]) : 0;

// 5. 优先使用各度预设的调色板背景
const bgColor = rule.palette?.bgHex 
  ? { name: rule.palette.bg, hex: rule.palette.bgHex }
  : pickOne(BACKGROUND_COLORS.filter(bg => bg.temp === rule.bgTempPrefer || bg.temp === 'neutral'));
```

---

## 七、Prompt 中的色彩描述示例

```
[COLOR]
- Background: paper-white (#F6F3EA)
- Primary hue: 黄 (butter #FFF5D3, brightness 96%)
- Secondary hue: 蓝 (ice-blue #DFF0FC) - small accent
- Temperature: warm, guided by Dana degree
- Contrast method: area - large yellow mass with tiny blue accent
- Accent usage: 5% area, 15% opacity, as subtle highlight
```

---

## 八、V2 特别规则

### 忍辱度（Ksanti）暖黄中轴
- **暖黄色**：warm-amber `#FFDF91` 作为"等持/保持"的稳定温度轴
- **面积要求**：暖黄轴面积 6–18%（可作中区或层）
- **不透明度**：12–18%
- **禁止**：强对比与高饱和红
- **气质差异**：用暖黄拉开与持戒（冷静秩序）的差异

### 禅定度（Samadhi）内在灯火
- **暖黄色**：sunlight `#FFE391` 作为暖光点醒，消除过清冷感
- **面积要求**：暖黄面积 2–8%（严格控制）
- **不透明度**：10–15%
- **视觉原则**：以"光感"而非"热闹"为准
- **禁止**：红色、大面积暖色
